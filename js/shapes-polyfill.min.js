/*!
Copyright 2014 Adobe Systems Inc.;
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
!function(t){"use strict";function e(t){var e=getComputedStyle(t);this.units={px:1},this.element=t;var i=function(t){return t&&t.length?parseInt(t):0};this.margins=[e.marginTop,e.marginRight,e.marginBottom,e.marginLeft],this.margins=this.margins.map(i),this.borders=[e.borderTopWidth,e.borderRightWidth,e.borderBottomWidth,e.borderLeftWidth],this.borders=this.borders.map(i),this.paddings=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],this.paddings=this.paddings.map(i),this.borderBox={x:0,y:0,width:t.offsetWidth,height:t.offsetHeight},this.marginBox={x:-this.margins[3],y:-this.margins[0],width:t.offsetWidth+this.margins[1]+this.margins[3],height:t.offsetHeight+this.margins[0]+this.margins[2]};var r=this;this.borderBox.radii=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].map((function(t){return t=e[t].split(/\s+/),[r.toPixels(t[0],r.borderBox.width),r.toPixels(t.length>1?t[1]:t[0],r.borderBox.height)]})),this.cssFloat=e.cssFloat}function i(t,e,i){return(i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y)}function r(t,e,r){return Math.abs(i(t,e,r))<350}function s(t,e){return t.x==e.x&&t.y==e.y}function n(){}function o(t,e,i,r){return t.y>=i&&t.y<=r?{x1:t.x-e,x2:t.x+e}:r<t.y?(s=E(r-t.y,e,e),{x1:t.x-s,x2:t.x+s}):(s=E(i-t.y,e,e),{x1:t.x-s,x2:t.x+s});var s}function h(t,e,i){this.init(t,e,i)}function a(t,e){var i=t.polygon.shapeMargin,r=e.x*i,s=e.y*i;this.anchorEdge=t,this.normalUnitVector=e;var n={x:t.vertex1.x+r,y:t.vertex1.y+s},o={x:t.vertex2.x+r,y:t.vertex2.y+s};this.init(t.polygon,n,o)}function p(t){for(var e=0,r=1;r<t.length;++r){var s=t[r];(s.y<t[e].y||s.y==t[e].y&&s.x<t[e].x)&&(e=r)}var n=t[(e+1)%t.length];return i(t[(e+t.length-1)%t.length],t[e],n)<0}function c(t,e,i){if(this.m_vertices=t,this.fillRule=e,this.shapeMargin=i,t.length<3)return this.m_edges=[],void(this.shapeMarginEdges=[]);var s=[],n=t.length>0?t[0].x:void 0,o=t.length>0?t[0].y:void 0,c=n,u=o,l=p(t),d=0;do{var g=this.nextEdgeVertexIndex(d,l);s.push(new h(this,t[d],t[g]));var f=t[d].x,x=t[d].y;n=Math.min(f,n),o=Math.min(x,o),c=Math.max(f,c),u=Math.max(x,u),d=g}while(0!==d);for(var m,y=0;y<s.length&&s.length>3;)m=(y+1)%s.length,r(s[y].vertex1,s[y].vertex2,s[m].vertex2)?(s[y].vertex2=s[m].vertex2,s.splice(m,1)):y++;if(0===i)this.shapeMarginEdges=s;else{for(var v=[],b=0;b<s.length;b++)v.push(new a(s[b],s[b].outwardNormal())),v.push(new a(s[b],s[b].inwardNormal()));this.shapeMarginEdges=v}this.m_edges=s,this.bounds=new R(n-i,o-i,2*i+(c-n),2*i+(u-o))}function u(t,e){return t.minX-e.minX}function l(t,e){return e.x-t.x}function d(t,e){return e.maxX-t.maxX}function g(t,e){return t.x-e.x}function f(t,e,i){this.y=t,this.startX=e,this.endX=i}function x(t,e){this.intervals=[],this.yOffset=t,this.size=e;for(var i=0;e>i;i++)this.intervals[i]=x.none;this.minY=-t,this.maxY=e-t}function m(t){this.shapeMargin=t,this.xIntercepts=[];for(var e=0;t>=e;e++)this.xIntercepts[e]=Math.sqrt(t*t-e*e)}function y(t,e){console.log("Unable to load image ",t,". It's probably missing or you've run into a CORS issue."),e&&console.log("The exact problem was ",e)}function v(t,e,i){var r=document.createElement("canvas");this.width=r.width=e,this.height=r.height=i;var s=r.getContext("2d");s.drawImage(t,0,0,e,i);try{this.imageData=s.getImageData(0,0,e,i)}catch(e){y(t.src,e)}}function b(t,e,i,r,s,n){this.url=t,this.box=e,this.shapeImageThreshold=256*i,this.shapeMargin=r,this.clip=s,this.init(n)}function w(t,e){this.width=t,this.height=e}function R(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r,this.maxX=t+i,this.maxY=e+r}function M(t,e,i,r,s){this.rect=t,this.radii={topLeft:e,topRight:i,bottomLeft:r,bottomRight:s}}function E(t,e,i){return e*Math.sqrt(1-t*t/(i*i))}function L(t,e,i){return 0===e?1:Math.round(0===t||i>t*e/2?e:Math.sqrt(2*i*(e/t)))}function A(t,e,i,r){return function(s,n,o){if(!this.rect.overlapsYRange(s,n))return[{x:void 0,height:n-s}];var h=[];s<this.rect.y&&h.push({x:void 0,height:this.rect.y-s});var a,p,c,u,l,d=t.call(this),g=e.call(this),f=new R(this.rect.x,d.maxY,this.rect.width,g.y-d.maxY);if(d.overlapsYRange(s,n))for(a=L(d.width,d.height,o),p=Math.max(d.y,s),c=Math.min(d.maxY,n),u=p;c>u;u+=a)l=E(d.maxY-Math.min(u+a,c),d.width,d.height),h.push({height:Math.min(a,c-u),x:r(d,l)});if(p=Math.max(f.y,s),c=Math.min(f.maxY,n),f.overlapsYRange(s,n)&&h.push({x:i(f),height:c-p}),g.overlapsYRange(s,n))for(a=L(g.width,g.height,o),p=Math.max(s,g.y),c=Math.min(g.maxY,n),u=p;c>u;u+=a)l=E(u-g.y,g.width,g.height),h.push({height:Math.min(a,c-u),x:r(g,l)});return n>this.rect.maxY&&h.push({x:void 0,height:n-this.rect.maxY}),h}}function Y(t,e){var i,r=void 0===t.shapeMargin?0:t.shapeMargin;if(t.shape){switch(t.shape.type){case"circle":i=function(t,e){var i=t.r+e,r=new w(i,i);return new M(new R(t.cx-i,t.cy-i,2*i,2*i),r,r,r,r)}(t.shape,r);break;case"ellipse":i=function(t,e){var i=new w(t.rx+e,t.ry+e);return new M(new R(t.cx-i.width,t.cy-i.height,2*i.width,2*i.height),i,i,i,i)}(t.shape,r);break;case"inset":(i=function(t,e){function i(t){return new w(t[0]+e,t[1]+e)}var r=i(t.radii[0]),s=i(t.radii[1]),n=i(t.radii[2]),o=i(t.radii[3]);return new M(new R(t.x-e,t.y-e,t.width+2*e,t.height+2*e),r,s,o,n)}(t.shape,r)).isRenderable()||i.adjustRadii();break;case"polygon":i=function(t,e){return new c(t.points,t.fillRule,e)}(t.shape,r)}return e(),i}return t.url?function(t,e,i,r,s,n){return new b(t,e,i,r,new R(s.x,s.y,s.width,s.height),n)}(t.url,t.box,t.shapeImageThreshold,r,t.clip,e):t.box?(i=function(t,e){function i(t){return new w(t[0]+e,t[1]+e)}var r=i(t.radii[0]),s=i(t.radii[1]),n=i(t.radii[2]),o=i(t.radii[3]);return new M(new R(-e,-e,t.width+2*e,t.height+2*e),r,s,o,n)}(t.box,r),e(),i):void console.error("Unrecognized shape")}function S(t){this.metrics=new e(t);var i={metrics:this.metrics,shapeOutside:t.getAttribute("data-shape-outside"),shapeMargin:t.getAttribute("data-shape-margin"),shapeImageThreshold:t.getAttribute("data-shape-image-threshold")};this.shapeValue=new I(i);var r=this;this.geometry=Y(this.shapeValue,(function(){r.ready=!0,r.callback&&r.callback()}))}function X(t){this.scope=t;var e=document.currentScript;e||(e=(e=document.getElementsByTagName("script"))[e.length-1]);var i=this;"false"!==e.getAttribute("data-auto-run")&&t.addEventListener&&t.addEventListener("load",(function(){i.run()}))}function I(t){return t&&t.metrics&&t.shapeOutside?(this.url=this.parseUrl(t.shapeOutside),this.box=this.parseBox(this.url?"content-box":t.shapeOutside,t.metrics),this.shape=this.parseBasicShape(t.shapeOutside,this.box,t.metrics),this.clip=this.computeClip(this.box,t.metrics),this.shapeMargin=this.parseShapeMargin(t.shapeMargin,this.box,t.metrics),void(this.shapeImageThreshold=this.parseShapeImageThreshold(t.shapeImageThreshold))):void console.error("ShapeValue requires at least a metrics object and shape-outside string")}function C(t,e,i){var r=i.reduce((function(t,e){return t+e[0]}),0),s=i.reduce((function(t,e){return t+e[1]}),0),n=i.reduce((function(t,e){return t+e[2]}),0),o=i.reduce((function(t,e){return t+e[3]}),0);t.x-=e*o,t.y-=e*r,t.width+=e*(o+s),t.height+=e*(r+n)}function T(t,e,i){if(0>e)return Math.max(t+e*i,0);var r=Math.abs(t/i);return 1>r?Math.max(t+i*(1+Math.pow(r-1,3)),0):t+i}function P(t,e,i){var r=i.reduce((function(t,e){return t+e[0]}),0),s=i.reduce((function(t,e){return t+e[1]}),0),n=i.reduce((function(t,e){return t+e[2]}),0),o=i.reduce((function(t,e){return t+e[3]}),0);t[0][0]=T(t[0][0],e,o),t[0][1]=T(t[0][1],e,r),t[1][0]=T(t[1][0],e,s),t[1][1]=T(t[1][1],e,r),t[2][0]=T(t[2][0],e,s),t[2][1]=T(t[2][1],e,n),t[3][0]=T(t[3][0],e,o),t[3][1]=T(t[3][1],e,n)}function B(t,e){return t.map((function(t){return t[e]}))}function O(t,e,i){var r="TopLeft",s=0;switch((t=t.split(/\s+/))[0]){case"top":case"left":break;case"bottom":case"right":r="BottomRight";break;case"center":s=e/2;break;default:s=i.toPixels(t[0],e)}return t.length>1&&(s=i.toPixels(t[1],e)),"TopLeft"===r?s:e-s}function z(t,e,i,r){return"closest-side"===t?Math.min.apply(null,e):"farthest-side"===t?Math.max.apply(null,e):r.toPixels(t,i)}function F(t){this.source=t,this.url=t.href||null,this.cssText=""}function N(t){return this instanceof N?(this.stylesheets=[],this.queueCount=0,this.callback=t||function(){},void this.init()):new N(t)}function V(t){this.callback=t||function(){};var e=this;new N((function(t){e.onStylesLoaded(t)}))}e.prototype.unitToPx=function(t){if(this.units[t])return this.units[t];var e=this.element.style.getPropertyValue("line-height");return this.element.style.setProperty("line-height",1+t),this.units[t]=parseFloat(getComputedStyle(this.element).getPropertyValue("line-height")),this.element.style.setProperty("line-height",e),this.units[t]},e.prototype.getUnitsMap=function(t){var e=document.createElement("div");e.style.width="0px",e.style.height="0px",t.appendChild(e);var i=getComputedStyle(e),r={};return["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","in","px","pt","pc"].forEach((function(t){e.style.lineHeight="1"+t,r[t]=parseFloat(i.lineHeight)})),e.parentNode.removeChild(e),r},e.prototype.toPixels=function(t,e){var i=/([\-0-9\.]*)([a-z%]*)/.exec(t);return i[1]=parseFloat(i[1]),i[2]?"%"===i[2]?i[1]*e/100:i[1]*this.unitToPx(i[2]):i[1]},n.prototype.init=function(t,e,i){this.polygon=t,this.vertex1=e,this.vertex2=i,this.minX=Math.min(this.vertex1.x,this.vertex2.x),this.maxX=Math.max(this.vertex1.x,this.vertex2.x)},n.prototype.containsPoint=function(t){return function(t,e,i){return i.x>=Math.min(t.x,e.x)&&i.x<=Math.max(t.x,e.x)&&r(t,e,i)}(this.vertex1,this.vertex2,t)},n.prototype.overlapsYRange=function(t,e){var i=this.vertex1.y,r=this.vertex2.y;return e>=Math.min(i,r)&&t<=Math.max(i,r)},n.prototype.isWithinYRange=function(t,e){var i=this.vertex1.y,r=this.vertex2.y;return t<=Math.min(i,r)&&e>=Math.max(i,r)},n.prototype.inwardNormal=function(){var t=this.vertex2.x-this.vertex1.x,e=this.vertex2.y-this.vertex1.y,i=Math.sqrt(t*t+e*e);return{x:-e/i,y:t/i}},n.prototype.outwardNormal=function(){var t=this.inwardNormal();return{x:-t.x,y:-t.y}},n.prototype.xIntercept=function(t){var e=this.vertex1.y,i=this.vertex2.y;return e==i?Math.min(this.vertex1.x,this.vertex2.x):t==Math.min(e,i)?i>e?this.vertex1.x:this.vertex2.x:t==Math.max(e,i)?e>i?this.vertex1.x:this.vertex2.x:this.vertex1.x+(t-e)*(this.vertex2.x-this.vertex1.x)/(i-e)},n.prototype.clippedEdgeXRange=function(t,e){if(this.isWithinYRange(t,e)){var i=this.vertex1.x,r=this.vertex2.x;return{x1:Math.min(i,r),x2:Math.max(i,r)}}var s,n;this.vertex1.y<this.vertex2.y?(s=this.vertex1,n=this.vertex2):(s=this.vertex2,n=this.vertex1);var o=s.y<t?this.xIntercept(t):s.x,h=n.y>e?this.xIntercept(e):n.x;return{x1:Math.min(o,h),x2:Math.max(o,h)}},h.prototype=new n,a.prototype=new n,c.prototype.vertexAt=function(t){return this.m_vertices[t]},c.prototype.edgeAt=function(t){return this.m_edges[t]},c.prototype.isEmpty=function(){return this.m_edges.length<3||this.bounds.isEmpty()},c.prototype.vertices=function(){return this.m_vertices.slice(0)},c.prototype.edges=function(){return this.m_edges.slice(0)},c.prototype.overlapsYRange=function(t,e){return t<this.bounds.maxY&&e>=this.bounds.y},c.prototype.nextVertexIndex=function(t,e){var i=this.m_vertices.length;return(e?t+1:t-1+i)%i},c.prototype.nextEdgeVertexIndex=function(t,e){for(var i=(this.m_vertices.length,this.nextVertexIndex(t,e));i&&s(this.vertexAt(t),this.vertexAt(i));)i=this.nextVertexIndex(i,e);for(;i;){var n=this.nextVertexIndex(i,e);if(!r(this.vertexAt(t),this.vertexAt(i),this.vertexAt(n)))break;i=n}return i},c.prototype.containsPointEvenOdd=function(t){for(var e=0,i=0;i<this.m_edges.length;++i){var r=this.edgeAt(i);if(r.containsPoint(t))return!0;var s=r.vertex1,n=r.vertex2;if(s.y<=t.y&&n.y>t.y||s.y>t.y&&n.y<=t.y){var o=(t.y-s.y)/(n.y-s.y);t.x<s.x+o*(n.x-s.x)&&++e}}return 0!=(1&e)},c.prototype.containsPointNonZero=function(t){for(var e=0,r=0;r<this.m_edges.length;++r){var s=this.edgeAt(r);if(s.containsPoint(t))return!0;var n=s.vertex1,o=s.vertex2;o.y<t.y?n.y>t.y&&i(n,o,t)>0&&++e:o.y>t.y&&n.y<=t.y&&i(n,o,t)<0&&--e}return 0!==e},c.prototype.containsPoint=function(t){return!!this.bounds.containsPoint(t)&&("nonzero"==this.fillRule?this.containsPointNonZero(t):this.containsPointEvenOdd(t))},c.prototype.edgeVerticesThatOverlapYRange=function(t,e){for(var i=[],r=0;r<this.m_edges.length;r++){var s=this.edgeAt(r).vertex1;s.y>=t&&s.y<e&&i.push(s)}return i},c.prototype.edgesThatOverlapYRange=function(t,e){for(var i=[],r=0;r<this.m_edges.length;r++){var s=this.edgeAt(r);s.overlapsYRange(t,e)&&i.push(s)}return i},c.prototype.shapeMarginEdgesThatOverlapYRange=function(t,e){for(var i=[],r=0;r<this.shapeMarginEdges.length;r++){var s=this.shapeMarginEdges[r];s.overlapsYRange(t,e)&&i.push(s)}return i},c.prototype.leftExclusionEdge=function(t,e){if(!this.isEmpty()&&this.bounds.overlapsYRange(t,e)){var i,r,s,n=this.shapeMarginEdgesThatOverlapYRange(t,e);if(0!==n.length)for(n.sort(u),i=n[0].clippedEdgeXRange(t,e).x1,r=1;r<n.length&&!(n[r].minX>i);r++)s=n[r].clippedEdgeXRange(t,e),i=void 0===i?s.x1:Math.min(i,s.x1);var h=this.shapeMargin;if(h>0){var a=this.edgeVerticesThatOverlapYRange(t-h,e+h);for(a.sort(l),r=0;r<a.length;r++)s=o(a[r],h,t,e),i=void 0===i?s.x1:Math.min(i,s.x1)}return void 0===i&&console.error("Polygon leftExclusionEdge() failed"),i}},c.prototype.rightExclusionEdge=function(t,e){if(!this.isEmpty()&&this.bounds.overlapsYRange(t,e)){var i,r,s,n=this.shapeMarginEdgesThatOverlapYRange(t,e);if(0!==n.length)for(n.sort(d),i=n[0].clippedEdgeXRange(t,e).x2,r=1;r<n.length&&!(n[r].maxX<i);r++)s=n[r].clippedEdgeXRange(t,e),i=Math.max(i,s.x2);var h=this.shapeMargin;if(h>0){var a=this.edgeVerticesThatOverlapYRange(t-h,e+h);for(a.sort(g),r=0;r<a.length;r++)s=o(a[r],h,t,e),i=void 0===i?s.x2:Math.max(i,s.x2)}return void 0===i&&console.error("Polygon rightExclusionEdge() failed"),i}},x.none={},x.prototype.intervalAt=function(t){return this.intervals[t+this.yOffset]},x.prototype.setIntervalAt=function(t,e){this.intervals[t+this.yOffset]=e},x.prototype.uniteIntervalAt=function(t,e){var i=this.intervalAt(t);i===x.none?this.setIntervalAt(t,e):(i.startX=Math.min(i.startX,e.startX),i.endX=Math.max(i.endX,e.endX))},x.prototype.intervalAtContains=function(t,e){var i=this.intervalAt(t);return i!=x.none&&(i.startX<=e.startX&&i.endX>=e.endX)},m.prototype.generateIntervalAt=function(t,e){var i=Math.abs(t-e.y),r=i>this.shapeMargin?0:this.xIntercepts[i];return new f(t,e.startX-r,e.endX+r)},x.prototype.computeMarginIntervals=function(t){for(var e=new m(t),i=new x(this.yOffset,this.size),r=this.minY;r<this.maxY;++r){var s=this.intervalAt(r);if(s!=x.none){var n,o=Math.max(this.minY,r-t),h=Math.min(this.maxY-1,r+t);for(n=r-1;n>=o&&!(n>0&&this.intervalAtContains(n,s));--n)i.uniteIntervalAt(n,e.generateIntervalAt(n,s));for(i.uniteIntervalAt(r,e.generateIntervalAt(r,s)),n=r+1;h>=n&&!(n<this.maxY&&this.intervalAtContains(n,s));++n)i.uniteIntervalAt(n,e.generateIntervalAt(n,s))}}return i},v.prototype.hasData=function(){return!!this.imageData},v.prototype.alphaAt=function(t,e){return this.imageData.data[4*t+3+e*this.width*4]},b.prototype.init=function(t){var e,i=this,r=new Image;if(document.createElement("canvas").getContext||(y(i.url),t()),r.onload=function(){i.intervals=i.computeIntervals(r),i.intervals&&i.shapeMargin>0&&(i.intervals=i.intervals.computeMarginIntervals(i.shapeMargin,i.clip)),e&&URL.revokeObjectURL(e),t()},r.onerror=function(){y(i.url),t()},!r.hasOwnProperty("crossOrigin")&&window.URL&&window.URL.createObjectURL){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(e=URL.createObjectURL(s.response),r.src=e):(y(i.url),t()))},s.open("GET",i.url,!0),s.responseType="blob",s.send()}else r.crossOrigin="anonymous",r.src=i.url},b.prototype.computeIntervals=function(t){var e=this.clip,i=this.shapeImageThreshold,r=this.box.width,s=new v(t,r,this.box.height);if(s.hasData()){for(var n=new x(-e.y,e.height),o=Math.min(e.height,this.box.height),h=0;o>h;h++)for(var a=-1,p=0;p<this.box.width;p++){var c=s.alphaAt(p,h);-1==a&&c>i?(a=p,n.intervalAt(h)===x.none&&n.setIntervalAt(h,new f(h,a,r))):-1!=a&&i>=c&&(n.intervalAt(h).endX=p,a=-1)}return n}},b.prototype.rightExclusionEdge=function(t,e){var i=this.intervals;if(!i)return this.clip.width;for(var r,s=Math.max(t,this.clip.y);e>=s&&s<this.clip.maxY;s++){var n=i.intervalAt(s).endX;(void 0===r||void 0!==n&&n>r)&&(r=n)}return r},b.prototype.leftExclusionEdge=function(t,e){var i=this.intervals;if(!i)return 0;for(var r,s=Math.max(t,this.clip.y);e>=s&&s<this.clip.maxY;s++){var n=i.intervalAt(s).startX;(void 0===r||void 0!==n&&r>n)&&(r=n)}return r},w.zeroSize={width:0,height:0},w.prototype.isEmpty=function(){return this.width<=0||this.height<=0},w.prototype.scale=function(t){this.width*=t,this.height*=t},R.prototype.isEmpty=function(){return this.width<=0||this.height<=0},R.prototype.containsX=function(t){return t>=this.x&&t<this.maxX},R.prototype.containsY=function(t){return t>=this.y&&t<this.maxY},R.prototype.containsPoint=function(t){return this.containsX(t.x)&&this.containsY(t.y)},R.prototype.shiftLeftEdgeTo=function(t){this.width-=t-this.x,this.x=t},R.prototype.shiftTopEdgeTo=function(t){this.height-=t-this.y,this.y=t},R.prototype.shiftRightEdgeTo=function(t){this.width=t-this.x},R.prototype.shiftBottomEdgeTo=function(t){this.height=t-this.y},R.prototype.overlapsYRange=function(t,e){return!this.isEmpty()&&e>=this.y&&t<this.maxY},R.prototype.overlapsXRange=function(t,e){return!this.isEmpty()&&e>=this.x&&t<this.maxX},M.prototype.isEmpty=function(){return this.width<=0||this.height<=0},M.prototype.topLeftCorner=function(){return new R(this.rect.x,this.rect.y,this.radii.topLeft.width,this.radii.topLeft.height)},M.prototype.topRightCorner=function(){return new R(this.rect.maxX-this.radii.topRight.width,this.rect.y,this.radii.topRight.width,this.radii.topRight.height)},M.prototype.bottomLeftCorner=function(){return new R(this.rect.x,this.rect.maxY-this.radii.bottomLeft.height,this.radii.bottomLeft.width,this.radii.bottomLeft.height)},M.prototype.bottomRightCorner=function(){return new R(this.rect.maxX-this.radii.bottomRight.width,this.rect.maxY-this.radii.bottomRight.height,this.radii.bottomRight.width,this.radii.bottomRight.height)},M.prototype.isRounded=function(){function t(t){return t.width>0&&t.height>0}return t(this.radii.topLeft)||t(this.radii.topRight)||t(this.radii.bottomLeft)||t(this.radii.bottomRight)},M.prototype.cornersInsetRect=function(){var t=this.topLeftCorner(),e=this.topRightCorner(),i=this.bottomLeftCorner(),r=this.bottomRightCorner(),s=Math.max(t.maxX,i.maxX),n=Math.max(t.maxY,e.maxY);return new R(s,n,Math.min(e.x,r.x)-s,Math.min(i.y,r.y)-n)},M.prototype.scaleRadii=function(t){if(1!=t){var e=this.radii;e.topLeft.scale(t),e.topLeft.isEmpty()&&(e.topLeft=w.zeroSize),e.topRight.scale(t),e.topRight.isEmpty()&&(e.topRight=w.zeroSize),e.bottomLeft.scale(t),e.bottomLeft.isEmpty()&&(e.bottomLeft=w.zeroSize),e.bottomRight.scale(t),e.bottomRight.isEmpty()&&(e.bottomRight=w.zeroSize)}},M.prototype.isRenderable=function(){var t=this.radii,e=this.rect;return t.topLeft.width+t.topRight.width<=e.width&&t.bottomLeft.width+t.bottomRight.width<=e.width&&t.topLeft.height+t.bottomLeft.height<=e.height&&t.topRight.height+t.bottomRight.height<=e.height},M.prototype.adjustRadii=function(){var t=this.radii,e=Math.max(t.topLeft.width+t.topRight.width,t.bottomLeft.width+t.bottomRight.width),i=Math.max(t.topLeft.height+t.bottomLeft.height,t.topRight.height+t.bottomRight.height);if(0>=e||0>=i)this.radii={topLeft:w.zeroSize,topRight:w.zeroSize,bottomRight:w.zeroSize,bottomLeft:w.zeroSize};else{var r=this.rect,s=r.width/e,n=r.height/i;this.scaleRadii(n>s?s:n)}},M.prototype.minXInterceptAt=function(t,e){if(!this.rect.containsY(t))return e;var i,r=this.topLeftCorner();if(r.containsY(t))return i=r.maxY-t,r.maxX-E(i,r.width,r.height);var s=this.bottomLeftCorner();return s.containsY(t)?(i=t-s.y,s.maxX-E(i,s.width,s.height)):this.rect.x},M.prototype.maxXInterceptAt=function(t,e){if(!this.rect.containsY(t))return e;var i,r=this.topRightCorner();if(r.containsY(t))return i=r.maxY-t,r.x+E(i,r.width,r.height);var s=this.bottomRightCorner();return s.containsY(t)?(i=t-s.y,s.x+E(i,s.width,s.height)):this.rect.maxX},M.prototype.rightExclusionEdge=function(t,e){return this.rect.isEmpty()||!this.rect.overlapsYRange(t,e)?void 0:!this.isRounded()||this.cornersInsetRect().overlapsYRange(t,e)?this.rect.maxX:Math.max(this.maxXInterceptAt(t,this.rect.x),this.maxXInterceptAt(e,this.rect.x))},M.prototype.leftExclusionEdge=function(t,e){return this.rect.isEmpty()||!this.rect.overlapsYRange(t,e)?void 0:!this.isRounded()||this.cornersInsetRect().overlapsYRange(t,e)?this.rect.x:Math.min(this.minXInterceptAt(t,this.rect.maxX),this.minXInterceptAt(e,this.rect.maxX))},M.prototype.rightExclusionOffsets=A(M.prototype.topRightCorner,M.prototype.bottomRightCorner,(function(t){return t.maxX}),(function(t,e){return t.x+e})),M.prototype.leftExclusionOffsets=A(M.prototype.topLeftCorner,M.prototype.bottomLeftCorner,(function(t){return t.x}),(function(t,e){return t.maxX-e})),S.prototype.onReady=function(t){this.ready?t():this.callback=t},S.prototype.leftExclusionEdge=function(t){return this.geometry?this.geometry.leftExclusionEdge(t.top,t.bottom):t.left},S.prototype.rightExclusionEdge=function(t){return this.geometry?this.geometry.rightExclusionEdge(t.top,t.bottom):t.right},S.prototype.computeStepOffsets=function(t){for(var e,i=[],r=0;r<Math.ceil(this.metrics.marginBox.height/t);r++){var s={left:0,right:this.shapeValue.box.width,top:r*t,bottom:Math.min((r+1)*t,this.metrics.marginBox.height)};s.top-=this.metrics.margins[0]+this.shapeValue.box.y,s.bottom-=this.metrics.margins[0]+this.shapeValue.box.y,"left"===this.metrics.cssFloat?e=void 0===(e=this.rightExclusionEdge(s))?0:e+this.shapeValue.box.x+this.metrics.margins[3]:e=void 0===(e=this.leftExclusionEdge(s))?0:this.metrics.marginBox.width-(e+this.shapeValue.box.x+this.metrics.margins[3]),i.push({cssFloat:this.metrics.cssFloat,top:s.top+this.shapeValue.box.y+this.metrics.margins[0],bottom:s.bottom+this.shapeValue.box.y+this.metrics.margins[0],offset:Math.min(e,this.metrics.marginBox.width)})}return i},S.prototype.computeAdaptiveOffsets=function(t){for(var e=this.shapeValue.box.x+this.metrics.margins[3],i=this.metrics.margins[0]+this.shapeValue.box.y,r="left"===this.metrics.cssFloat?this.geometry.rightExclusionOffsets(-i,this.metrics.marginBox.height-i,t):this.geometry.leftExclusionOffsets(-i,this.metrics.marginBox.height-i,t),s=[],n=0,o=0;o<r.length;o++){var h;void 0===r[o].x?h=0:(h="left"==this.metrics.cssFloat?r[o].x+e:this.metrics.marginBox.width-(r[o].x+e),h=Math.min(h,this.metrics.marginBox.width)),s.push({offset:h,top:n,bottom:n+r[o].height,cssFloat:this.metrics.cssFloat}),n+=r[o].height}return s},S.prototype.offsets=function(t){return this.geometry instanceof M?"step"==(t&&t.mode)?this.computeStepOffsets(t.step):this.computeAdaptiveOffsets(t.limit):this.computeStepOffsets(t.step)},X.prototype.polyfill=function(t,e){var i=getComputedStyle(t);if(/left|right/.test(i.cssFloat)&&t.getAttribute("data-shape-outside")){var r=e&&e.step||parseInt(i.fontSize),s=e&&e.mode||"adaptive",n=e&&e.limit||1.8*r,o=new S(t),h=this;o.onReady((function(){var i=o.offsets({mode:s,limit:n,step:r});(function(t,e){var i,r=document.createElement("div");for(var s in e.forEach((function(t){var e=t.bottom-t.top,s=document.createElement("div");for(var n in s.className="sandbag",i={cssFloat:t.cssFloat,width:t.offset+"px",height:e+"px",clear:t.cssFloat})s.style[n]=i[n];r.appendChild(s)})),i={position:"relative",width:"auto",height:"0",clear:"both",pointerEvents:"none"})r.style[s]=i[s];var n,o=t.parentNode,h=getComputedStyle(o),a=parseFloat(h.borderTop)+parseFloat(h.borderBottom);for(s in i={position:"absolute",top:"0",width:"100%",height:o.clientHeight-a,left:"0"},n=document.createElement("div"),i)n.style[s]=i[s];r.appendChild(n),t.parentNode&&t.parentNode.insertBefore(r,t),n.appendChild(t),r.setAttribute("data-shape-outside-container","true")})(t,i),e&&e.callback&&"function"==typeof e.callback&&e.callback.call(h.scope)}))}},X.prototype.removePolyfill=function(t){var e=t.parentNode;for(e=t.parentNode;e&&e.hasAttribute&&!e.hasAttribute("data-shape-outside-container");e=e.parentNode);e&&e.hasAttribute&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},X.prototype.run=function(t){var e=this,i=t&&t.force,r=(i&&(i===this.Force.Layout||this.Force.LayoutStyles),i&&(i===this.Force.Styles||i===this.Force.LayoutStyles));if(i===this.Force.LayoutStyles?t.force=this.Force.Layout:i&&delete t.force,void 0===this.hasNativeSupport){var s=document.createElement("div");["shape-outside","-webkit-shape-outside"].forEach((function(t){s.style.setProperty(t,"content-box"),e.hasNativeSupport=e.hasNativeSupport||s.style.getPropertyValue(t)}))}if(!this.hasNativeSupport||i){if(!this.stylesLoaded||r){this.stylesLoaded=!0,new V((function(i){i.forEach((function(t){for(var e=document.querySelectorAll(t.selector),i=0;i<e.length;i++)e[i].setAttribute("data-"+t.property,t.value)})),e.run(t)}));var n=function(t,e){var i;return function(){var r=this,s=arguments;clearTimeout(i),i=setTimeout((function(){i=null,t.apply(r,s)}),e)}}((function(){e.teardown(),e.run(t)}),300);return void this.scope.addEventListener("resize",n)}for(var o=document.querySelectorAll("[data-shape-outside]"),h=0;h<o.length;h++)this.polyfill(o[h],t)}},X.prototype.teardown=function(){for(var t=document.querySelectorAll("[data-shape-outside]"),e=0;e<t.length;e++)this.removePolyfill(t[e])},X.prototype.Force={Layout:"force-layout",Styles:"force-styles",LayoutStyles:"force-layout-styles"},Object.freeze&&(X.prototype.Force=Object.freeze(X.prototype.Force)),I.prototype.parseUrl=function(t){var e=/url\((.*)\)/.exec(t);return e?e=(e=(e=e[1]).replace(/^['"]/,"")).replace(/['"]$/,""):null},I.prototype.parseBox=function(t,e){var i=/margin-box|border-box|padding-box|content-box/.exec(t);i=i?i[0]:"margin-box";var r=JSON.parse(JSON.stringify(e.borderBox.radii)),s={text:i,x:e.borderBox.x,y:e.borderBox.y,width:e.borderBox.width,height:e.borderBox.height,radii:r};switch(i){case"content-box":C(s,-1,[e.paddings,e.borders]),P(s.radii,-1,[e.paddings,e.borders]);break;case"padding-box":C(s,-1,[e.borders]),P(s.radii,-1,[e.borders]);break;case"border-box":break;case"margin-box":C(s,1,[e.margins]),P(s.radii,1,[e.margins])}return s},I.prototype.printShape=function(){if(this.shape)switch(this.shape.type){case"inset":return"inset("+this.shape.insets.join(" ")+" round "+B(this.shape.radii,0).join(" ")+" / "+B(this.shape.radii,1).join(" ")+")";case"circle":return"circle("+this.shape.r+" at "+this.shape.cx+" "+this.shape.cy+")";case"ellipse":return"ellipse("+this.shape.rx+" "+this.shape.ry+" at "+this.shape.cx+" "+this.shape.cy+")";case"polygon":return"polygon("+this.shape.fillRule+", "+this.shape.points.map((function(t){return t.x+" "+t.y})).join(", ")+")";default:return"not yet implemented for "+this.shape.type}return"no shape specified"},I.prototype.printBox=function(){return this.box?this.box.text+" { x: "+this.box.x+", y: "+this.box.y+", width: "+this.box.width+", height: "+this.box.height+", radii: "+B(this.box.radii,0).join(" ")+" / "+B(this.box.radii,1).join(" ")+" }":"no box specified"},I.prototype.parseBasicShape=function(t,e,i){var r=/(inset|circle|ellipse|polygon)\((.*)\)/.exec(t);if(!r)return null;var s=r[1],n=r[2]?r[2]:"";switch(s){case"inset":return this.parseInset(n,e,i);case"circle":return this.parseCircle(n,e,i);case"ellipse":return this.parseEllipse(n,e,i);case"polygon":return this.parsePolygon(n,e,i);default:return null}},I.prototype.parseInset=function(t,e,i){t=/((?:[^r]|r(?!o))*)?\s*(?:round\s+([^\/]*)(?:\s*\/\s*(.*))?)?/.exec(t);var r,s={type:"inset",insets:[0,0,0,0],radii:[[0,0],[0,0],[0,0],[0,0]]};if(t&&t[1]){var n=t[1].trim();n=n.split(/\s+/),s.insets[0]=n[0],s.insets[1]=n.length>1?n[1]:s.insets[0],s.insets[2]=n.length>2?n[2]:s.insets[0],s.insets[3]=n.length>3?n[3]:s.insets[1],s.insets[0]=i.toPixels(s.insets[0],e.height),s.insets[1]=i.toPixels(s.insets[1],e.width),s.insets[2]=i.toPixels(s.insets[2],e.height),s.insets[3]=i.toPixels(s.insets[3],e.width)}return t&&t[2]&&((r=(r=t[2].trim()).split(/\s+/)).length<2&&r.push(r[0]),r.length<3&&r.push(r[0]),r.length<4&&r.push(r[1]),s.radii=r.map((function(t){return[t=i.toPixels(t,e.width),t]}))),t&&t[3]&&((r=(r=t[3].trim()).split(/\s+/)).length<2&&r.push(r[0]),r.length<3&&r.push(r[0]),r.length<4&&r.push(r[1]),r.forEach((function(t,r){s.radii[r][1]=i.toPixels(t,e.height)}))),s.x=s.insets[3],s.y=s.insets[0],s.width=e.width-(s.insets[1]+s.insets[3]),s.height=e.height-(s.insets[0]+s.insets[2]),s},I.prototype.parseEllipsoid=function(t){var e={};if((t=/((?:[^a]|a(?!t))*)?\s*(?:at\s+(.*))?/.exec(t))&&t[1]){var i=t[1].trim();i=i.split(/\s+/),e.rx=i[0],e.ry=i.length>1?i[1]:i[0]}else e.rx=e.ry="closest-side";var r=[];if(t&&t[2]){var s=t[2].trim();s=s.split(/\s+/);var n=!1;s.forEach((function(t){/\d+/.test(t)&&n?r[r.length-1]+=" "+t:r.push(t),n=/top|bottom|left|right/.test(t)&&s.length>2}))}for(;r.length<2;)r.push("center");if(/top|bottom/.test(r[0])||/left|right/.test(r[1])){var o=r[0];r[0]=r[1],r[1]=o}return e.cx=r[0],e.cy=r[1],e},I.prototype.parseCircle=function(t,e,i){var r=this.parseEllipsoid(t);return r.type="circle",r.cx=O(r.cx,e.width,i),r.cy=O(r.cy,e.height,i),r.r=z(r.rx,[Math.abs(r.cx),Math.abs(e.width-r.cx),Math.abs(r.cy),Math.abs(e.height-r.cy)],Math.sqrt((e.width*e.width+e.height*e.height)/2),i),delete r.rx,delete r.ry,r},I.prototype.parseEllipse=function(t,e,i){var r=this.parseEllipsoid(t);return r.type="ellipse",r.cx=O(r.cx,e.width,i),r.cy=O(r.cy,e.height,i),r.rx=z(r.rx,[Math.abs(r.cx),Math.abs(e.width-r.cx)],e.width,i),r.ry=z(r.ry,[Math.abs(r.cy),Math.abs(e.height-r.cy)],e.height,i),r},I.prototype.parsePolygon=function(t,e,i){var r="nonzero";return(t=t.split(/\s*,\s*/)).length>0&&/nonzero|evenodd/.test(t[0])&&(r=t[0].trim(),t=t.slice(1)),{type:"polygon",fillRule:r,points:t.map((function(t){var r=t.split(/\s+/);return{x:i.toPixels(r[0],e.width),y:i.toPixels(r[1],e.height)}}))}},I.prototype.computeClip=function(t,e){var i=e.margins[3],r=e.margins[0],s=e.margins[3]+e.margins[1],n=e.margins[0]+e.margins[2];return{x:-t.x-i,y:-t.y-r,width:e.borderBox.width+s,height:e.borderBox.height+n}},I.prototype.parseShapeMargin=function(t,e,i){return parseInt(t)?Math.max(0,i.toPixels(t,e.width)):0},I.prototype.parseShapeImageThreshold=function(t){var e=parseFloat(t);return e?Math.min(Math.max(0,e),1):0},F.prototype.load=function(t,e,i){var r=this;if(this.url){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(r.cssText=s.responseText,t.call(i,r)):e.call(i,r))},s.open("GET",this.url);try{s.send(null)}catch(t){console.log("An error occurred loading a stylesheet, probably because we can't access the local file system"),e.call(i,r)}}else this.cssText=this.source.textContent,t.call(i,r)},N.prototype.init=function(){var t,e,i=function(){var t,e,i=document,r=[];if("function"==typeof i.querySelectorAll)r=i.querySelectorAll('link[rel="stylesheet"], style'),r=Array.prototype.slice.call(r,0);else{var s=i.getElementsByTagName("link");if(s.length)for(t=0,e=s.length;e>t;t++)"stylesheet"===s[t].getAttribute("rel")&&r.push(s[t]);for(t=0,e=(s=i.getElementsByTagName("style")).length;e>t;t++)r.push(s[t])}return r}(),r=i.length;for(this.queueCount=r,e=0;r>e;e++)t=new F(i[e]),this.stylesheets.push(t),t.load(this.onStyleSheetLoad,this.onStyleSheetError,this)},N.prototype.onStyleSheetLoad=function(){this.queueCount--,this.onComplete.call(this)},N.prototype.onStyleSheetError=function(t){var e,i=this.stylesheets.length;for(e=0;i>e;e++)if(t.source===this.stylesheets[e].source)return this.stylesheets.splice(e,1),this.queueCount--,void this.onComplete.call(this)},N.prototype.onComplete=function(){0===this.queueCount&&this.callback.call(this,this.stylesheets)},V.prototype.onStylesLoaded=function(t){var e,i,r=[];["shape-outside","shape-margin","shape-image-threshold"].forEach((function(s){e=new RegExp("\\s*([^{}]*[^\\s])\\s*{[^\\}]*("+s+")\\s*:\\s*((?:[^;\\(]|\\([^\\)]*\\))*)\\s*;","ig"),t.forEach((function(t){for(;null!==(i=e.exec(t.cssText));)r.push({selector:i[1],property:i[2],value:i[3]})}))})),this.callback(r)},t.ShapesPolyfill=new X(t)}(window);